.magic {
  & > div:nth-last-child(4n+1):first-child {
    ~ div:last-child {
      @include left_block;
    }
  }

  & > div:nth-last-child(4n+2):first-child {
    ~ div:last-child {
      @include sqb_block;
    }

    ~ div:nth-last-child(2) {
      @include sqt_block;
    }
  }

  & > div:nth-last-child(4n+3):first-child {
    ~ div:nth-last-child(3) {
      @include left_block;
    }

    ~ div:nth-last-child(2) {
      @include sqt_block;
    }

    ~ div:last-child {
      @include sqb_block;
    }
  }

  & > div:nth-last-child(4n+4):first-child {
    ~ div:nth-last-child(4) {
      @include left_block;
    }

    ~ div:nth-last-child(3) {
      @include top_block;
    }

    ~ div:nth-last-child(2) {
      @include sql_block;
    }

    ~ div:last-child {
      @include sqr_block;
    }
  }
}
